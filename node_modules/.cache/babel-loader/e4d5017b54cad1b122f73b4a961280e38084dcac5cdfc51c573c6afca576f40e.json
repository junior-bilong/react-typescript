{"ast":null,"code":"var _jsxFileName = \"/home/junior/Desktop/pokemon-app/src/pages/login.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const history = useHistory();\n  const [form, setForm] = useState({\n    username: {\n      value: ''\n    },\n    password: {\n      value: ''\n    }\n  });\n  const [message, setMessage] = useState('vous etes deconnecte. (sonna / junior)');\n  const handleInputChange = e => {\n    const fieldName = e.target.name;\n    const fieldValue = e.target.value;\n    const newField = {\n      [fieldName]: {\n        value: fieldValue\n      }\n    };\n    setForm({\n      ...form,\n      ...newField\n    });\n  };\n  const validateForm = () => {\n    let newForm = form;\n\n    // validator username\n    if (form.username.value.length < 4) {\n      const errorMsg = \"votre nom doit faire au moins 4 caracteres de long.\";\n      const newField = {\n        value: form.username.value,\n        error: errorMsg,\n        isValid: false\n      };\n      newForm = {\n        ...newForm,\n        ...{\n          username: newField\n        }\n      };\n    } else {\n      const newField = {\n        value: form.username.value,\n        error: '',\n        isValid: true\n      };\n      newForm = {\n        ...newForm,\n        ...{\n          username: newField\n        }\n      };\n    }\n\n    // validator password\n    if (form.password.value.length < 6) {\n      const errorMsg = \"votre mots de passe doit faire au moins 6 caracteres de long.\";\n      const newField = {\n        value: form.password.value,\n        error: errorMsg,\n        isValid: false\n      };\n      newForm = {\n        ...newForm,\n        ...{\n          password: newField\n        }\n      };\n    } else {\n      const newField = {\n        value: form.password.value,\n        error: '',\n        isValid: true\n      };\n      newForm = {\n        ...newForm,\n        ...{\n          password: newField\n        }\n      };\n    }\n    setForm(newForm);\n    return newForm.username.isValid && newForm.password.isValid;\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    const isFormValid = validateForm();\n    if (isFormValid) {\n      setMessage('Tentative de connexion en cours...');\n      AuthenticationService.login(form.username.value, form.password.value).then(isAuthenticated => {\n        if (!isAuthenticated) {\n          setMessage(\"identifiant ou mot de passe incorrect.\");\n          return;\n        }\n        history.push('/pokemons');\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: e => handleSubmit(e),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col s12 m8 offset-m2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card hoverable\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-stacked\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-content\",\n              children: [message && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-pannel grey lighten-5\",\n                  children: message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"username\",\n                  children: \"Identifiant\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"username\",\n                  type: \"text\",\n                  name: \"username\",\n                  className: \"form-control\",\n                  value: form.username.value,\n                  onChange: e => handleInputChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 37\n                }, this), form.username.error && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-panel red accent-1\",\n                  children: form.username.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"password\",\n                  children: \"Mot de passe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"password\",\n                  type: \"text\",\n                  name: \"password\",\n                  className: \"form-control\",\n                  value: form.password.value,\n                  onChange: e => handleInputChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 37\n                }, this), form.password.error && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-panel red accent-1\",\n                  children: form.password.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-action center\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn\",\n                children: \"Valider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"3WooNOsH4B8ZIG/5aoQN6pJdMFk=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useHistory","jsxDEV","_jsxDEV","Login","_s","history","form","setForm","username","value","password","message","setMessage","handleInputChange","e","fieldName","target","name","fieldValue","newField","validateForm","newForm","length","errorMsg","error","isValid","handleSubmit","preventDefault","isFormValid","AuthenticationService","login","then","isAuthenticated","push","onSubmit","children","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","id","type","onChange","_c","$RefreshReg$"],"sources":["/home/junior/Desktop/pokemon-app/src/pages/login.tsx"],"sourcesContent":["import React, {FunctionComponent} from \"react\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\ntype Field = {\n    value?: any,\n    error?: string,\n    isValid?: boolean\n};\n\ntype Form = {\n    username : Field,\n    password : Field\n}\n\n\nconst Login: FunctionComponent = () => {\n\n    const history = useHistory();\n\n    const [form, setForm] = useState<Form>({\n        username: {value: ''},\n        password: {value: ''},\n    });\n\n    const [message, setMessage] = useState<string>('vous etes deconnecte. (sonna / junior)')\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        const fieldName: string = e.target.name;\n        const fieldValue: string = e.target.value;\n        const newField: Field = {[fieldName]: { value : fieldValue }};\n\n        setForm({...form, ...newField})\n    }\n\n    const validateForm = () => {\n        let newForm: Form = form;\n\n        // validator username\n        if (form.username.value.length < 4) {\n            const errorMsg: string = \"votre nom doit faire au moins 4 caracteres de long.\";\n            const newField: Field = { value: form.username.value, error: errorMsg, isValid: false};\n            newForm = {...newForm, ...{username: newField}}\n        } else {\n            const newField: Field = {value: form.username.value, error: '', isValid: true};\n            newForm = {...newForm, ...{username: newField}}\n        }\n\n         // validator password\n         if (form.password.value.length < 6) {\n            const errorMsg: string = \"votre mots de passe doit faire au moins 6 caracteres de long.\";\n            const newField: Field = { value: form.password.value, error: errorMsg, isValid: false};\n            newForm = {...newForm, ...{password: newField}}\n        } else {\n            const newField: Field = {value: form.password.value, error: '', isValid: true};\n            newForm = {...newForm, ...{password: newField}}\n        }\n\n        setForm(newForm);\n        return newForm.username.isValid && newForm.password.isValid;\n    }\n\n    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        const isFormValid = validateForm();\n        if(isFormValid) {\n            setMessage('Tentative de connexion en cours...');\n            AuthenticationService.login(form.username.value, form.password.value).then(isAuthenticated => {\n                if (!isAuthenticated) {\n                    setMessage(\"identifiant ou mot de passe incorrect.\")\n                    return;\n                }\n\n                history.push('/pokemons');\n            })\n        }\n    }\n\n    return (\n        <form onSubmit={(e) => handleSubmit(e)}>\n            <div className=\"row\">\n                <div className=\"col s12 m8 offset-m2\">\n                    <div className=\"card hoverable\">\n                        <div className=\"card-stacked\">\n                            <div className=\"card-content\">\n\n                                {/* form message */}\n                                {message && <div className=\"form-group\">\n                                    <div className=\"card-pannel grey lighten-5\">\n                                        {message}\n                                    </div>\n                                </div>}\n\n                                {/* field username */}\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"username\">Identifiant</label>\n                                    <input id=\"username\" type=\"text\" name=\"username\" className=\"form-control\" value={form.username.value} onChange={e => handleInputChange(e)} />\n\n                                    {/* error */}\n                                    {form.username.error && \n                                        <div className=\"card-panel red accent-1\">\n                                            {form.username.error}\n                                        </div>\n                                    }\n                                </div>\n\n                                {/* field passwor */}\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"password\">Mot de passe</label>\n                                    <input id=\"password\" type=\"text\" name=\"password\" className=\"form-control\" value={form.password.value} onChange={e => handleInputChange(e)} />\n\n                                    {/* error */}\n                                    {form.password.error && \n                                        <div className=\"card-panel red accent-1\">\n                                            {form.password.error}\n                                        </div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"card-action center\">\n                                {/* submit button */}\n                                <button type=\"submit\" className=\"btn\">Valider</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}