{"ast":null,"code":"import _classCallCheck from\"/home/junior/Desktop/pokemon-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/junior/Desktop/pokemon-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{POKEMONS}from\"../models/mock-pokemon\";var PokemonService=/*#__PURE__*/function(){function PokemonService(){_classCallCheck(this,PokemonService);}_createClass(PokemonService,null,[{key:\"getPokemons\",value:function getPokemons(){var _this=this;if(this.isDev){return fetch(\"http://localhost:3001/pokemons\").then(function(response){return response.json();}).catch(function(error){return _this.handleError(error);});}return new Promise(function(resolve){resolve(_this.pokemons);});}},{key:\"getPokemon\",value:function getPokemon(id){var _this2=this;if(this.isDev){return fetch(\"http://localhost:3001/pokemons/\".concat(id)).then(function(response){return response.json();}).then(function(data){return _this2.isEmpty(data)?null:data;}).catch(function(error){return _this2.handleError(error);});}return new Promise(function(resolve){// resolve(this.pokemons.find(pokemon => pokemon.id === id));\n});}},{key:\"updatePokemon\",value:function updatePokemon(pokemon){var _this3=this;if(this.isDev){return fetch(\"http://localhost:3001/pokemons/\".concat(pokemon.id),{method:'PUT',body:JSON.stringify(pokemon),headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).catch(function(error){return _this3.handleError(error);});}return new Promise(function(resolve){var id=pokemon.id;var index=_this3.pokemons.findIndex(function(pokemon){return pokemon.id===id;});_this3.pokemons[index]=pokemon;resolve(pokemon);});}},{key:\"deletePokemon\",value:function deletePokemon(pokemon){var _this4=this;if(this.isDev){return fetch(\"http://localhost:3001/pokemons/\".concat(pokemon.id),{method:'DELETE',headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).catch(function(error){return _this4.handleError(error);});}return new Promise(function(resolve){var id=pokemon.id;_this4.pokemons=_this4.pokemons.filter(function(pokemon){return pokemon.id!==id;});resolve({});});}},{key:\"addPokemon\",value:function addPokemon(pokemon){var _this5=this;// delete pokemon.created;\nif(this.isDev){return fetch(\"http://localhost:3001/pokemons\",{method:'POST',body:JSON.stringify(pokemon),headers:{'Content-Type':'application/json'}}).then(function(response){return response.json();}).catch(function(error){return _this5.handleError(error);});}return new Promise(function(resolve){_this5.pokemons.push(pokemon);resolve(pokemon);});}},{key:\"searchPokemon\",value:function searchPokemon(term){var _this6=this;return fetch(\"http://localhost:3001/pokemons?q=\".concat(term)).then(function(response){return response.json();}).catch(function(error){return _this6.handleError(error);});}},{key:\"isEmpty\",value:function isEmpty(data){return Object.keys(data).length===0;}},{key:\"handleError\",value:function handleError(error){console.error(error);}}]);return PokemonService;}();PokemonService.pokemons=POKEMONS;PokemonService.isDev=!process.env.NODE_ENV||process.env.NODE_ENV==='development';export{PokemonService as default};","map":{"version":3,"names":["POKEMONS","PokemonService","_classCallCheck","_createClass","key","value","getPokemons","_this","isDev","fetch","then","response","json","catch","error","handleError","Promise","resolve","pokemons","getPokemon","id","_this2","concat","data","isEmpty","updatePokemon","pokemon","_this3","method","body","JSON","stringify","headers","index","findIndex","deletePokemon","_this4","filter","addPokemon","_this5","push","searchPokemon","term","_this6","Object","keys","length","console","process","env","NODE_ENV","default"],"sources":["/home/junior/Desktop/pokemon-app/src/services/pokemon-service.ts"],"sourcesContent":["import Pokemon from \"../models/pokemon\";\nimport { POKEMONS } from \"../models/mock-pokemon\";\nimport { resolve } from \"path\";\n\nexport default class PokemonService {\n\n    static pokemons:Pokemon[] = POKEMONS;\n\n    static isDev = (!process.env.NODE_ENV || process.env.NODE_ENV === 'development');\n\n    static getPokemons(): Promise<Pokemon[]> {\n        if(this.isDev) {\n            return fetch(\"http://localhost:3001/pokemons\")\n            .then(response => response.json())\n            .catch(error => this.handleError(error));\n        }\n\n        return new Promise(resolve => {\n            resolve(this.pokemons)\n        })\n    }\n\n    static getPokemon(id: number): Promise<Pokemon|null> {\n        if(this.isDev) {\n            return fetch(`http://localhost:3001/pokemons/${id}`)\n            .then(response => response.json())\n            .then(data => this.isEmpty(data) ? null : data)\n            .catch(error => this.handleError(error));\n        }\n\n        return new Promise(resolve => {\n            // resolve(this.pokemons.find(pokemon => pokemon.id === id));\n        });\n    }\n\n    static updatePokemon(pokemon: Pokemon): Promise<Pokemon> {\n        if(this.isDev) {\n            return fetch(`http://localhost:3001/pokemons/${pokemon.id}`, {\n            method: 'PUT',\n            body: JSON.stringify(pokemon),\n            headers: {'Content-Type' : 'application/json'}\n        })\n        .then(response => response.json())\n        .catch(error => this.handleError(error));\n        }\n\n        return new Promise(resolve => {\n            const {id} = pokemon;\n            const index = this.pokemons.findIndex(pokemon => pokemon.id === id);\n            this.pokemons[index] = pokemon;\n            resolve(pokemon)\n        })\n    }\n\n    static deletePokemon(pokemon: Pokemon): Promise<{}> {\n        if(this.isDev) {\n            return fetch(`http://localhost:3001/pokemons/${pokemon.id}`, {\n            method: 'DELETE',\n            headers: {'Content-Type' : 'application/json'}\n        })\n        .then(response => response.json())\n        .catch(error => this.handleError(error));\n        }\n\n        return new Promise(resolve => {\n            const {id} = pokemon;\n            this.pokemons = this.pokemons.filter(pokemon => pokemon.id !== id)\n            resolve({})\n        })\n    }\n\n    static addPokemon(pokemon: Pokemon): Promise<Pokemon> {\n        // delete pokemon.created;\n         \n        if(this.isDev) {\n            return fetch(`http://localhost:3001/pokemons`, {\n            method: 'POST',\n            body: JSON.stringify(pokemon),\n            headers: {'Content-Type' : 'application/json'}\n        })\n        .then(response => response.json())\n        .catch(error => this.handleError(error));\n        }\n\n        return new Promise(resolve => {\n            this.pokemons.push(pokemon);\n            resolve(pokemon)\n        })\n    }\n\n    static searchPokemon(term: string): Promise<Pokemon[]> {\n        return fetch(`http://localhost:3001/pokemons?q=${term}`)\n        .then (response => response.json())\n        .catch(error => this.handleError(error));\n    }\n\n    static isEmpty(data: Object): boolean {\n        return Object.keys(data).length === 0;\n    }\n\n    static handleError(error: Error) : void {\n        console.error(error)\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}