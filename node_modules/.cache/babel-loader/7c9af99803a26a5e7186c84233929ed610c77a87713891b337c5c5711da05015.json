{"ast":null,"code":"import _objectSpread from\"/home/junior/Desktop/pokemon-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"/home/junior/Desktop/pokemon-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/home/junior/Desktop/pokemon-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import AuthenticationService from\"../services/authentocation-service\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var history=useHistory();var _useState=useState({username:{value:''},password:{value:''}}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState('vous etes deconnecte. (sonna / junior)'),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var handleInputChange=function handleInputChange(e){var fieldName=e.target.name;var fieldValue=e.target.value;var newField=_defineProperty({},fieldName,{value:fieldValue});setForm(_objectSpread(_objectSpread({},form),newField));};var validateForm=function validateForm(){var newForm=form;// validator username\nif(form.username.value.length<4){var errorMsg=\"votre nom doit faire au moins 4 caracteres de long.\";var newField={value:form.username.value,error:errorMsg,isValid:false};newForm=_objectSpread(_objectSpread({},newForm),{username:newField});}else{var _newField2={value:form.username.value,error:'',isValid:true};newForm=_objectSpread(_objectSpread({},newForm),{username:_newField2});}// validator password\nif(form.password.value.length<6){var _errorMsg=\"votre mots de passe doit faire au moins 6 caracteres de long.\";var _newField3={value:form.password.value,error:_errorMsg,isValid:false};newForm=_objectSpread(_objectSpread({},newForm),{password:_newField3});}else{var _newField4={value:form.password.value,error:'',isValid:true};newForm=_objectSpread(_objectSpread({},newForm),{password:_newField4});}setForm(newForm);return newForm.username.isValid&&newForm.password.isValid;};var handleSubmit=function handleSubmit(e){e.preventDefault();var isFormValid=validateForm();if(isFormValid){setMessage('Tentative de connexion en cours...');AuthenticationService.login(form.username.value,form.password.value).then(function(isAuthenticated){if(!isAuthenticated){setMessage(\"identifiant ou mot de passe incorrect.\");return;}history.push('/pokemons');});}};return/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col s12 m8 offset-m2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card hoverable\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-stacked\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-pannel grey lighten-5\",children:message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Identifiant\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",name:\"username\",className:\"form-control\",value:form.username.value,onChange:function onChange(e){return handleInputChange(e);}}),form.username.error&&/*#__PURE__*/_jsx(\"div\",{className:\"card-panel red accent-1\",children:form.username.error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"text\",name:\"password\",className:\"form-control\",value:form.password.value,onChange:function onChange(e){return handleInputChange(e);}}),form.password.error&&/*#__PURE__*/_jsx(\"div\",{className:\"card-panel red accent-1\",children:form.password.error})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-action center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Valider\"})})]})})})})});};export default Login;","map":{"version":3,"names":["React","useState","AuthenticationService","useHistory","jsx","_jsx","jsxs","_jsxs","Login","history","_useState","username","value","password","_useState2","_slicedToArray","form","setForm","_useState3","_useState4","message","setMessage","handleInputChange","e","fieldName","target","name","fieldValue","newField","_defineProperty","_objectSpread","validateForm","newForm","length","errorMsg","error","isValid","handleSubmit","preventDefault","isFormValid","login","then","isAuthenticated","push","onSubmit","children","className","htmlFor","id","type","onChange"],"sources":["/home/junior/Desktop/pokemon-app/src/pages/login.tsx"],"sourcesContent":["import React, {FunctionComponent} from \"react\";\nimport { useState } from \"react\";\nimport AuthenticationService from \"../services/authentocation-service\";\nimport { useHistory } from \"react-router-dom\";\n\ntype Field = {\n    value?: any,\n    error?: string,\n    isValid?: boolean\n};\n\ntype Form = {\n    username : Field,\n    password : Field\n}\n\n\nconst Login: FunctionComponent = () => {\n\n    const history = useHistory();\n\n    const [form, setForm] = useState<Form>({\n        username: {value: ''},\n        password: {value: ''},\n    });\n\n    const [message, setMessage] = useState<string>('vous etes deconnecte. (sonna / junior)')\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        const fieldName: string = e.target.name;\n        const fieldValue: string = e.target.value;\n        const newField: Field = {[fieldName]: { value : fieldValue }};\n\n        setForm({...form, ...newField})\n    }\n\n    const validateForm = () => {\n        let newForm: Form = form;\n\n        // validator username\n        if (form.username.value.length < 4) {\n            const errorMsg: string = \"votre nom doit faire au moins 4 caracteres de long.\";\n            const newField: Field = { value: form.username.value, error: errorMsg, isValid: false};\n            newForm = {...newForm, ...{username: newField}}\n        } else {\n            const newField: Field = {value: form.username.value, error: '', isValid: true};\n            newForm = {...newForm, ...{username: newField}}\n        }\n\n         // validator password\n         if (form.password.value.length < 6) {\n            const errorMsg: string = \"votre mots de passe doit faire au moins 6 caracteres de long.\";\n            const newField: Field = { value: form.password.value, error: errorMsg, isValid: false};\n            newForm = {...newForm, ...{password: newField}}\n        } else {\n            const newField: Field = {value: form.password.value, error: '', isValid: true};\n            newForm = {...newForm, ...{password: newField}}\n        }\n\n        setForm(newForm);\n        return newForm.username.isValid && newForm.password.isValid;\n    }\n\n    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        const isFormValid = validateForm();\n        if(isFormValid) {\n            setMessage('Tentative de connexion en cours...');\n            AuthenticationService.login(form.username.value, form.password.value).then(isAuthenticated => {\n                if (!isAuthenticated) {\n                    setMessage(\"identifiant ou mot de passe incorrect.\")\n                    return;\n                }\n\n                history.push('/pokemons');\n            })\n        }\n    }\n\n    return (\n        <form onSubmit={(e) => handleSubmit(e)}>\n            <div className=\"row\">\n                <div className=\"col s12 m8 offset-m2\">\n                    <div className=\"card hoverable\">\n                        <div className=\"card-stacked\">\n                            <div className=\"card-content\">\n\n                                {/* form message */}\n                                {message && <div className=\"form-group\">\n                                    <div className=\"card-pannel grey lighten-5\">\n                                        {message}\n                                    </div>\n                                </div>}\n\n                                {/* field username */}\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"username\">Identifiant</label>\n                                    <input id=\"username\" type=\"text\" name=\"username\" className=\"form-control\" value={form.username.value} onChange={e => handleInputChange(e)} />\n\n                                    {/* error */}\n                                    {form.username.error && \n                                        <div className=\"card-panel red accent-1\">\n                                            {form.username.error}\n                                        </div>\n                                    }\n                                </div>\n\n                                {/* field passwor */}\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"password\">Mot de passe</label>\n                                    <input id=\"password\" type=\"text\" name=\"password\" className=\"form-control\" value={form.password.value} onChange={e => handleInputChange(e)} />\n\n                                    {/* error */}\n                                    {form.password.error && \n                                        <div className=\"card-panel red accent-1\">\n                                            {form.password.error}\n                                        </div>\n                                    }\n                                </div>\n                            </div>\n                            <div className=\"card-action center\">\n                                {/* submit button */}\n                                <button type=\"submit\" className=\"btn\">Valider</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}